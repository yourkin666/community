# 交流社区全栈项目计划

## 📋 项目概述

**项目名称**: 交流社区平台  
**技术栈**: React + Spring Boot + MyBatis + MySQL + Docker  
**项目类型**: 全栈Web应用  
**开发模式**: 容器化部署  

## 🎯 项目目标

构建一个现代化的交流社区平台，支持用户发布文章、互动交流、关注系统等核心功能，采用简洁现代的UI设计风格。

## 🏗️ 技术架构

### 后端技术栈
- **Spring Boot 2.7+** - 主框架
- **Spring Security** - 用户认证和授权
- **MyBatis** - 数据库操作
- **MySQL 8.0** - 主数据库
- **Redis** - 缓存和会话管理
- **Maven** - 依赖管理

### 前端技术栈
- **React 18+** - 主框架
- **React Router** - 路由管理
- **Axios** - HTTP请求
- **Ant Design** - UI组件库（简洁现代风格）
- **Redux Toolkit** - 状态管理
- **CSS Modules** - 样式管理

### 容器化部署
- **Docker** - 容器化
- **Docker Compose** - 多容器编排
- **Nginx** - 反向代理
- **MySQL容器** - 数据库服务
- **Redis容器** - 缓存服务

## 📊 数据库设计

### 核心表结构

```sql
-- 用户表
CREATE TABLE users (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    username VARCHAR(50) UNIQUE NOT NULL,
    email VARCHAR(100) UNIQUE NOT NULL,
    password VARCHAR(255) NOT NULL,
    avatar VARCHAR(255),
    bio TEXT,
    role ENUM('USER', 'MODERATOR', 'ADMIN') DEFAULT 'USER',
    status ENUM('ACTIVE', 'INACTIVE', 'BANNED') DEFAULT 'ACTIVE',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

-- 文章表
CREATE TABLE articles (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    title VARCHAR(200) NOT NULL,
    content LONGTEXT NOT NULL,
    summary TEXT,
    author_id BIGINT NOT NULL,
    category_id BIGINT,
    status ENUM('DRAFT', 'PUBLISHED', 'ARCHIVED') DEFAULT 'DRAFT',
    view_count INT DEFAULT 0,
    like_count INT DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (author_id) REFERENCES users(id),
    FOREIGN KEY (category_id) REFERENCES categories(id)
);

-- 分类表
CREATE TABLE categories (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(50) UNIQUE NOT NULL,
    description TEXT,
    sort_order INT DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- 标签表
CREATE TABLE tags (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(30) UNIQUE NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- 文章标签关联表
CREATE TABLE article_tags (
    article_id BIGINT,
    tag_id BIGINT,
    PRIMARY KEY (article_id, tag_id),
    FOREIGN KEY (article_id) REFERENCES articles(id) ON DELETE CASCADE,
    FOREIGN KEY (tag_id) REFERENCES tags(id) ON DELETE CASCADE
);

-- 评论表
CREATE TABLE comments (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    article_id BIGINT NOT NULL,
    user_id BIGINT NOT NULL,
    content TEXT NOT NULL,
    parent_id BIGINT,
    like_count INT DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (article_id) REFERENCES articles(id) ON DELETE CASCADE,
    FOREIGN KEY (user_id) REFERENCES users(id),
    FOREIGN KEY (parent_id) REFERENCES comments(id)
);

-- 点赞表
CREATE TABLE likes (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    user_id BIGINT NOT NULL,
    target_type ENUM('ARTICLE', 'COMMENT') NOT NULL,
    target_id BIGINT NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE KEY unique_like (user_id, target_type, target_id),
    FOREIGN KEY (user_id) REFERENCES users(id)
);

-- 关注表
CREATE TABLE follows (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    follower_id BIGINT NOT NULL,
    following_id BIGINT NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE KEY unique_follow (follower_id, following_id),
    FOREIGN KEY (follower_id) REFERENCES users(id),
    FOREIGN KEY (following_id) REFERENCES users(id)
);

-- 私信表
CREATE TABLE messages (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    sender_id BIGINT NOT NULL,
    receiver_id BIGINT NOT NULL,
    content TEXT NOT NULL,
    status ENUM('UNREAD', 'READ') DEFAULT 'UNREAD',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (sender_id) REFERENCES users(id),
    FOREIGN KEY (receiver_id) REFERENCES users(id)
);

-- 通知表
CREATE TABLE notifications (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    user_id BIGINT NOT NULL,
    type ENUM('LIKE', 'COMMENT', 'FOLLOW', 'MESSAGE') NOT NULL,
    content TEXT NOT NULL,
    is_read BOOLEAN DEFAULT FALSE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id)
);
```

## 🚀 功能模块规划

### 1. 用户系统
- [x] 用户注册/登录/登出
- [x] 用户资料管理（头像、简介、个人主页）
- [x] 用户权限管理（普通用户、版主、管理员）
- [x] 用户状态管理

### 2. 文章系统
- [x] 文章发布、编辑、删除
- [x] 文章分类和标签管理
- [x] 文章搜索和筛选
- [x] 文章状态管理（草稿、发布、置顶）
- [x] 文章浏览统计

### 3. 互动系统
- [x] 评论和回复功能
- [x] 点赞/踩功能
- [x] 文章收藏功能
- [x] 用户关注/粉丝系统

### 4. 社区功能
- [x] 私信系统
- [x] 通知系统
- [x] 热门文章推荐
- [x] 用户排行榜

### 5. 管理功能
- [x] 内容审核
- [x] 用户管理
- [x] 分类管理
- [x] 系统设置

## 📁 项目结构

```
demo/
├── docker-compose.yml              # Docker编排文件
├── nginx/                          # Nginx配置
│   └── nginx.conf
├── mysql/                          # 数据库初始化
│   └── init.sql
├── backend/                        # Spring Boot后端
│   ├── Dockerfile
│   ├── pom.xml
│   └── src/
│       └── main/
│           ├── java/
│           │   └── com/
│           │       └── community/
│           │           ├── CommunityApplication.java
│           │           ├── config/          # 配置类
│           │           ├── controller/      # 控制器
│           │           ├── service/         # 业务逻辑
│           │           ├── mapper/          # MyBatis映射
│           │           ├── entity/          # 实体类
│           │           ├── dto/             # 数据传输对象
│           │           └── utils/           # 工具类
│           └── resources/
│               ├── application.yml
│               └── mapper/                  # MyBatis XML文件
├── frontend/                       # React前端
│   ├── Dockerfile
│   ├── package.json
│   └── src/
│       ├── components/             # 组件
│       ├── pages/                  # 页面
│       ├── services/               # API服务
│       ├── store/                  # Redux状态管理
│       ├── utils/                  # 工具函数
│       └── styles/                 # 样式文件
└── README.md                       # 项目说明
```

## 📅 开发计划

### 第一阶段：基础框架搭建 (1-2周)
- [x] Docker环境配置
- [x] 后端Spring Boot基础框架搭建
- [x] 前端React基础框架搭建
- [x] 数据库设计和初始化
- [x] 基础项目结构搭建

### 第二阶段：核心功能开发 (2-3周)
- [x] 用户系统（注册、登录、权限管理）
- [x] 文章系统（CRUD操作）
- [x] 基础UI界面设计
- [x] 前后端API对接

### 第三阶段：社区功能开发 (2-3周)
- [x] 评论系统
- [x] 关注系统
- [x] 点赞收藏功能
- [x] 用户互动功能

### 第四阶段：高级功能开发 (2-3周)
- [x] 私信系统
- [x] 通知系统
- [x] 管理后台
- [x] 搜索和推荐功能

### 第五阶段：测试和优化 (1-2周)
- [x] 功能测试
- [x] 性能优化
- [x] 安全加固
- [x] 部署文档

## 🐳 Docker部署配置

### docker-compose.yml
```yaml
version: '3.8'

services:
  mysql:
    image: mysql:8.0
    container_name: community-mysql
    environment:
      MYSQL_ROOT_PASSWORD: root123
      MYSQL_DATABASE: community
      MYSQL_USER: community
      MYSQL_PASSWORD: community123
    ports:
      - "3306:3306"
    volumes:
      - mysql_data:/var/lib/mysql
      - ./mysql/init.sql:/docker-entrypoint-initdb.d/init.sql

  redis:
    image: redis:7-alpine
    container_name: community-redis
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data

  backend:
    build: ./backend
    container_name: community-backend
    ports:
      - "8080:8080"
    depends_on:
      - mysql
      - redis
    environment:
      - SPRING_PROFILES_ACTIVE=docker
      - MYSQL_HOST=mysql
      - REDIS_HOST=redis

  frontend:
    build: ./frontend
    container_name: community-frontend
    ports:
      - "3000:3000"
    depends_on:
      - backend

  nginx:
    image: nginx:alpine
    container_name: community-nginx
    ports:
      - "80:80"
    volumes:
      - ./nginx/nginx.conf:/etc/nginx/nginx.conf
    depends_on:
      - frontend
      - backend

volumes:
  mysql_data:
  redis_data:
```

## 🔧 开发环境要求

- **Java**: JDK 11+
- **Node.js**: 16+
- **Docker**: 20+
- **Docker Compose**: 2.0+
- **MySQL**: 8.0+
- **Redis**: 6.0+

## 📝 开发规范

### 后端开发规范
- 使用RESTful API设计
- 统一返回格式
- 异常处理机制
- 日志记录规范
- 代码注释规范

### 前端开发规范
- 组件化开发
- 响应式设计
- 代码分割
- 错误边界处理
- 性能优化

## 🎨 UI设计原则

- **简洁现代**: 采用简洁的设计风格，突出内容
- **响应式**: 支持多设备访问
- **用户体验**: 注重交互体验和操作流畅性
- **一致性**: 保持设计元素的一致性

## 📈 性能目标

- 页面加载时间 < 2秒
- API响应时间 < 500ms
- 支持1000+并发用户
- 99.9%系统可用性

## 🔒 安全考虑

- 用户密码加密存储
- JWT token认证
- SQL注入防护
- XSS攻击防护
- CSRF攻击防护
- 文件上传安全

## 📚 学习资源

- [Spring Boot官方文档](https://spring.io/projects/spring-boot)
- [React官方文档](https://reactjs.org/)
- [MyBatis官方文档](https://mybatis.org/)
- [Ant Design组件库](https://ant.design/)
- [Docker官方文档](https://docs.docker.com/)

---

**创建时间**: 2024年12月
**最后更新**: 2024年12月
**版本**: v1.0
