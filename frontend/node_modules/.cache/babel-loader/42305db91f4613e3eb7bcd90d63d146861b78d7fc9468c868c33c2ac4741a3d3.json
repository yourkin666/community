{"ast":null,"code":"var _jsxFileName = \"/root/community/frontend/src/pages/CreateArticlePage.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { Card, Form, Input, Button, Typography, Select, message } from 'antd';\nimport { useNavigate } from 'react-router-dom';\nimport { SaveOutlined, SendOutlined } from '@ant-design/icons';\nimport { articleService } from '../services/articleService';\nimport { useAuth } from '../contexts/AuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  Title\n} = Typography;\nconst {\n  TextArea\n} = Input;\nconst {\n  Option\n} = Select;\nconst CreateArticlePage = () => {\n  _s();\n  const [form] = Form.useForm();\n  const [loading, setLoading] = useState(false);\n  const navigate = useNavigate();\n  const {\n    isAuthenticated\n  } = useAuth();\n\n  // 如果用户未登录，重定向到登录页\n  React.useEffect(() => {\n    if (!isAuthenticated) {\n      navigate('/login');\n    }\n  }, [isAuthenticated, navigate]);\n  const onFinish = async values => {\n    setLoading(true);\n    try {\n      const response = await articleService.createArticle(values);\n      if (response.success) {\n        message.success('文章发布成功');\n        navigate(`/articles/${response.data.id}`);\n      } else {\n        message.error(response.message);\n      }\n    } catch (error) {\n      message.error('发布文章失败');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleSaveDraft = async () => {\n    try {\n      const values = await form.validateFields();\n      values.status = 'DRAFT';\n      await onFinish(values);\n    } catch (error) {\n      console.error('表单验证失败:', error);\n    }\n  };\n  const handlePublish = async () => {\n    try {\n      const values = await form.validateFields();\n      values.status = 'PUBLISHED';\n      await onFinish(values);\n    } catch (error) {\n      console.error('表单验证失败:', error);\n    }\n  };\n  if (!isAuthenticated) {\n    return null;\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: '24px 0',\n      maxWidth: '800px',\n      margin: '0 auto'\n    },\n    children: /*#__PURE__*/_jsxDEV(Card, {\n      children: [/*#__PURE__*/_jsxDEV(Title, {\n        level: 2,\n        style: {\n          textAlign: 'center',\n          marginBottom: '32px'\n        },\n        children: \"\\u53D1\\u5E03\\u6587\\u7AE0\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Form, {\n        form: form,\n        layout: \"vertical\",\n        onFinish: onFinish,\n        children: [/*#__PURE__*/_jsxDEV(Form.Item, {\n          label: \"\\u6587\\u7AE0\\u6807\\u9898\",\n          name: \"title\",\n          rules: [{\n            required: true,\n            message: '请输入文章标题!'\n          }, {\n            max: 200,\n            message: '标题不能超过200个字符!'\n          }],\n          children: /*#__PURE__*/_jsxDEV(Input, {\n            placeholder: \"\\u8BF7\\u8F93\\u5165\\u6587\\u7AE0\\u6807\\u9898\",\n            size: \"large\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n          label: \"\\u6587\\u7AE0\\u6458\\u8981\",\n          name: \"summary\",\n          extra: \"\\u5982\\u679C\\u4E0D\\u586B\\u5199\\uFF0C\\u7CFB\\u7EDF\\u4F1A\\u81EA\\u52A8\\u751F\\u6210\\u6458\\u8981\",\n          children: /*#__PURE__*/_jsxDEV(TextArea, {\n            placeholder: \"\\u8BF7\\u8F93\\u5165\\u6587\\u7AE0\\u6458\\u8981\\uFF08\\u53EF\\u9009\\uFF09\",\n            rows: 3\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n          label: \"\\u6587\\u7AE0\\u5185\\u5BB9\",\n          name: \"content\",\n          rules: [{\n            required: true,\n            message: '请输入文章内容!'\n          }],\n          children: /*#__PURE__*/_jsxDEV(TextArea, {\n            placeholder: \"\\u8BF7\\u8F93\\u5165\\u6587\\u7AE0\\u5185\\u5BB9\",\n            rows: 15,\n            style: {\n              fontSize: '16px',\n              lineHeight: '1.6'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              gap: '16px',\n              justifyContent: 'center'\n            },\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              size: \"large\",\n              icon: /*#__PURE__*/_jsxDEV(SaveOutlined, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 121,\n                columnNumber: 23\n              }, this),\n              onClick: handleSaveDraft,\n              loading: loading,\n              children: \"\\u4FDD\\u5B58\\u8349\\u7A3F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              type: \"primary\",\n              size: \"large\",\n              icon: /*#__PURE__*/_jsxDEV(SendOutlined, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 130,\n                columnNumber: 23\n              }, this),\n              onClick: handlePublish,\n              loading: loading,\n              children: \"\\u7ACB\\u5373\\u53D1\\u5E03\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 5\n  }, this);\n};\n_s(CreateArticlePage, \"bAqJ/4MhCkxnmtVR+pKLeNCdOFQ=\", false, function () {\n  return [Form.useForm, useNavigate, useAuth];\n});\n_c = CreateArticlePage;\nexport default CreateArticlePage;\nvar _c;\n$RefreshReg$(_c, \"CreateArticlePage\");","map":{"version":3,"names":["React","useState","Card","Form","Input","Button","Typography","Select","message","useNavigate","SaveOutlined","SendOutlined","articleService","useAuth","jsxDEV","_jsxDEV","Title","TextArea","Option","CreateArticlePage","_s","form","useForm","loading","setLoading","navigate","isAuthenticated","useEffect","onFinish","values","response","createArticle","success","data","id","error","handleSaveDraft","validateFields","status","console","handlePublish","style","padding","maxWidth","margin","children","level","textAlign","marginBottom","fileName","_jsxFileName","lineNumber","columnNumber","layout","Item","label","name","rules","required","max","placeholder","size","extra","rows","fontSize","lineHeight","display","gap","justifyContent","icon","onClick","type","_c","$RefreshReg$"],"sources":["/root/community/frontend/src/pages/CreateArticlePage.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { Card, Form, Input, Button, Typography, Select, message } from 'antd';\nimport { useNavigate } from 'react-router-dom';\nimport { SaveOutlined, SendOutlined } from '@ant-design/icons';\nimport { articleService } from '../services/articleService';\nimport { useAuth } from '../contexts/AuthContext';\n\nconst { Title } = Typography;\nconst { TextArea } = Input;\nconst { Option } = Select;\n\nconst CreateArticlePage = () => {\n  const [form] = Form.useForm();\n  const [loading, setLoading] = useState(false);\n  const navigate = useNavigate();\n  const { isAuthenticated } = useAuth();\n\n  // 如果用户未登录，重定向到登录页\n  React.useEffect(() => {\n    if (!isAuthenticated) {\n      navigate('/login');\n    }\n  }, [isAuthenticated, navigate]);\n\n  const onFinish = async (values) => {\n    setLoading(true);\n    try {\n      const response = await articleService.createArticle(values);\n      if (response.success) {\n        message.success('文章发布成功');\n        navigate(`/articles/${response.data.id}`);\n      } else {\n        message.error(response.message);\n      }\n    } catch (error) {\n      message.error('发布文章失败');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSaveDraft = async () => {\n    try {\n      const values = await form.validateFields();\n      values.status = 'DRAFT';\n      await onFinish(values);\n    } catch (error) {\n      console.error('表单验证失败:', error);\n    }\n  };\n\n  const handlePublish = async () => {\n    try {\n      const values = await form.validateFields();\n      values.status = 'PUBLISHED';\n      await onFinish(values);\n    } catch (error) {\n      console.error('表单验证失败:', error);\n    }\n  };\n\n  if (!isAuthenticated) {\n    return null;\n  }\n\n  return (\n    <div style={{ padding: '24px 0', maxWidth: '800px', margin: '0 auto' }}>\n      <Card>\n        <Title level={2} style={{ textAlign: 'center', marginBottom: '32px' }}>\n          发布文章\n        </Title>\n\n        <Form\n          form={form}\n          layout=\"vertical\"\n          onFinish={onFinish}\n        >\n          <Form.Item\n            label=\"文章标题\"\n            name=\"title\"\n            rules={[\n              { required: true, message: '请输入文章标题!' },\n              { max: 200, message: '标题不能超过200个字符!' },\n            ]}\n          >\n            <Input \n              placeholder=\"请输入文章标题\" \n              size=\"large\"\n            />\n          </Form.Item>\n\n          <Form.Item\n            label=\"文章摘要\"\n            name=\"summary\"\n            extra=\"如果不填写，系统会自动生成摘要\"\n          >\n            <TextArea \n              placeholder=\"请输入文章摘要（可选）\" \n              rows={3}\n            />\n          </Form.Item>\n\n          <Form.Item\n            label=\"文章内容\"\n            name=\"content\"\n            rules={[\n              { required: true, message: '请输入文章内容!' },\n            ]}\n          >\n            <TextArea \n              placeholder=\"请输入文章内容\" \n              rows={15}\n              style={{ fontSize: '16px', lineHeight: '1.6' }}\n            />\n          </Form.Item>\n\n          <Form.Item>\n            <div style={{ display: 'flex', gap: '16px', justifyContent: 'center' }}>\n              <Button \n                size=\"large\"\n                icon={<SaveOutlined />}\n                onClick={handleSaveDraft}\n                loading={loading}\n              >\n                保存草稿\n              </Button>\n              <Button \n                type=\"primary\"\n                size=\"large\"\n                icon={<SendOutlined />}\n                onClick={handlePublish}\n                loading={loading}\n              >\n                立即发布\n              </Button>\n            </div>\n          </Form.Item>\n        </Form>\n      </Card>\n    </div>\n  );\n};\n\nexport default CreateArticlePage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}